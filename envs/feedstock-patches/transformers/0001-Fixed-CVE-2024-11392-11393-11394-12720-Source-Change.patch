From 2c1bc7c24c2824f08a84b05c2654af4e0001bc91 Mon Sep 17 00:00:00 2001
From: Vibhav Dhaimode <Vibhav.Dhaimode2@ibm.com>
Date: Wed, 23 Apr 2025 10:21:28 +0000
Subject: [PATCH] Fixed-CVE-2024-11392-11393-11394-12720-Source-Changed

---
 .gitignore                                    |   2 +-
 config/build-config.yaml                      |   6 ++
 ...1-Fix-for-CVE-2024-11392-11393-11394.patch | Bin 0 -> 3534 bytes
 .../0001-Fix-for-CVE-2024-12720.patch         | Bin 0 -> 1300 bytes
 transformers-4.37.2/meta.yaml                 |  68 ++++++++++++++++++
 ...1-Fix-for-CVE-2024-11392-11393-11394.patch | Bin 0 -> 3534 bytes
 .../0001-Fix-for-CVE-2024-12720.patch         | Bin 0 -> 1300 bytes
 {recipe => transformers-4.38.0}/meta.yaml     |   9 ++-
 8 files changed, 81 insertions(+), 4 deletions(-)
 create mode 100644 config/build-config.yaml
 create mode 100644 transformers-4.37.2/0001-Fix-for-CVE-2024-11392-11393-11394.patch
 create mode 100644 transformers-4.37.2/0001-Fix-for-CVE-2024-12720.patch
 create mode 100644 transformers-4.37.2/meta.yaml
 create mode 100644 transformers-4.38.0/0001-Fix-for-CVE-2024-11392-11393-11394.patch
 create mode 100644 transformers-4.38.0/0001-Fix-for-CVE-2024-12720.patch
 rename {recipe => transformers-4.38.0}/meta.yaml (81%)

diff --git a/.gitignore b/.gitignore
index 179afe5..84fded8 100644
--- a/.gitignore
+++ b/.gitignore
@@ -4,7 +4,7 @@
 # Please do not modify

 # Ignore all files and folders in root
-*
+
 !/conda-forge.yml

 # Don't ignore any files/folders if the parent folder is 'un-ignored'
diff --git a/config/build-config.yaml b/config/build-config.yaml
new file mode 100644
index 0000000..c77c211
--- /dev/null
+++ b/config/build-config.yaml
@@ -0,0 +1,6 @@
+recipes:
+  - name : transformers-4.37.2
+    path : transformers-4.37.2
+
+  - name : transformers-4.38.0
+    path : transformers-4.38.0
diff --git a/transformers-4.37.2/0001-Fix-for-CVE-2024-11392-11393-11394.patch b/transformers-4.37.2/0001-Fix-for-CVE-2024-11392-11393-11394.patch
new file mode 100644
index 0000000000000000000000000000000000000000..fd5db3c89328416b7d83656f7262f452812cefe6
GIT binary patch
literal 3534
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

literal 0
HcmV?d00001

diff --git a/transformers-4.37.2/0001-Fix-for-CVE-2024-12720.patch b/transformers-4.37.2/0001-Fix-for-CVE-2024-12720.patch
new file mode 100644
index 0000000000000000000000000000000000000000..17f00ae1d9207ad4aab98ccaa94456b2fae4276b
GIT binary patch
literal 1300
zcmbtTOOKl{5Wf3YjFKKg2n1*n64ZTZ+o+eVR^6zVBwZO8h`V5r?d+r4AKw8KWmoE<
zRV;%&&(EIEvs6_HGYrzu%Vu#L%rf5#7D<o<VVL=IjAs~fKU~Za=L@*0B-~*Qeh8iy
zwG#r*^VyQpL~vDdvhURcSMaG3+)lU@ap@*idCop_gAuIuID$D`)rz8nDR}cJ2x)@t
z(O`G`_!lN7g7xjy>iX*zmf{(*O2PGyFAfDv96tyHk1@w_7-*G@jp9<1M~O<0%PPe}
zk7c#bxfz@40j2oOji}^(r@PO%Hg5d_uMmJuDSXI8fspLD%rPC2ETl%&gbZw}ktrj#
zqGK_ZiYx=i$%O$vJ^?;HA(#o7;xnXPz%dD@;na0KT+F840zWRm_q^F;($wdq6EfSj
z;iOYuUV<|Xf)P>MEu=^at~GpX=~;E`pjr|ogIk3w#f8N5o!*KV97c{3RZAwE!BKD(
z)&);+(A&r%tP9Lc$yF}o*>Jm&y%CVUXC2e@;X9VqBSJxF8lHsN0R=py)suuB@>IxN
zgEpKVfy_I5f7GpVPtS}Odh|9Omnqbh)*>!mfSQ3C;o#Rr(GwK}mV>V8oEn+{iBBy)
zbN+fgg|6Pm1J(Q4w_$J*ZQP6IpT4fe^W)aCt>H!wN%P@#BWY(f*QD=Ql@VkG&-EE4
zy0Mu3Pax|}YH!@F-GVe5>*Bvq4j|BnveJeM{D4%F9WRP~A|&;H3PzX$^|5>%3GevS
zbs<c{=3CZ8*73D={H@!PqZ{T1y?)PX3)&`Xt%Wv9)UD;6CmcLc4q9&u&cTnURe%NV
J#B+Vd{s5hxo`nDa

literal 0
HcmV?d00001

diff --git a/transformers-4.37.2/meta.yaml b/transformers-4.37.2/meta.yaml
new file mode 100644
index 0000000..8882678
--- /dev/null
+++ b/transformers-4.37.2/meta.yaml
@@ -0,0 +1,68 @@
+{% set name = "transformers" %}
+{% set version = "4.37.2" %}
+
+package:
+  name: {{ name|lower }}
+  version: {{ version }}
+
+source:
+  url: https://github.com/huggingface/transformers/archive/refs/tags/v4.37.2.tar.gz
+  sha256: 792c01be033403eafd699555e7948e17a8f8ee3d860f221ff79e760f36342767
+  patches:
+    - 0001-Fix-for-CVE-2024-11392-11393-11394.patch
+    - 0001-Fix-for-CVE-2024-12720.patch
+
+build:
+  noarch: python
+  number: 0
+  script: {{ PYTHON }} -m pip install . -vv
+
+requirements:
+  host:
+    - pip
+    - python >=3.8
+  run:
+    - python >=3.8
+    - datasets !=2.5.0  # Required for transformers-cli.
+    - filelock
+    - huggingface_hub >=0.19.3,<1.0
+    - numpy {{ numpy }}
+    - regex !=2019.12.17
+    - requests
+    - safetensors >=0.4.1
+    - packaging >=20.0
+    - pyyaml >=5.1
+    - tqdm >=4.27
+    - tokenizers >=0.15,<0.19
+
+test:
+  imports:
+    - transformers
+    - transformers.benchmark
+    - transformers.commands
+    - transformers.data
+    - transformers.kernels
+    - transformers.models
+    - transformers.pipelines
+    - transformers.tools
+    - transformers.utils
+
+  commands:
+    - transformers-cli --help
+
+about:
+  home: https://github.com/huggingface/transformers
+  license: Apache-2.0
+  license_family: APACHE
+  license_file: LICENSE
+  summary: State-of-the-art Natural Language Processing for TensorFlow 2.0 and PyTorch
+  doc_url: https://huggingface.co/transformers/
+
+extra:
+  recipe-maintainers:
+    - mxr-conda
+    - roccqqck
+    - oblute
+    - rluria14
+    - ndmaxar
+    - setu4993
diff --git a/transformers-4.38.0/0001-Fix-for-CVE-2024-11392-11393-11394.patch b/transformers-4.38.0/0001-Fix-for-CVE-2024-11392-11393-11394.patch
new file mode 100644
index 0000000000000000000000000000000000000000..fd5db3c89328416b7d83656f7262f452812cefe6
GIT binary patch
literal 3534
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

literal 0
HcmV?d00001

diff --git a/transformers-4.38.0/0001-Fix-for-CVE-2024-12720.patch b/transformers-4.38.0/0001-Fix-for-CVE-2024-12720.patch
new file mode 100644
index 0000000000000000000000000000000000000000..17f00ae1d9207ad4aab98ccaa94456b2fae4276b
GIT binary patch
literal 1300
zcmbtTOOKl{5Wf3YjFKKg2n1*n64ZTZ+o+eVR^6zVBwZO8h`V5r?d+r4AKw8KWmoE<
zRV;%&&(EIEvs6_HGYrzu%Vu#L%rf5#7D<o<VVL=IjAs~fKU~Za=L@*0B-~*Qeh8iy
zwG#r*^VyQpL~vDdvhURcSMaG3+)lU@ap@*idCop_gAuIuID$D`)rz8nDR}cJ2x)@t
z(O`G`_!lN7g7xjy>iX*zmf{(*O2PGyFAfDv96tyHk1@w_7-*G@jp9<1M~O<0%PPe}
zk7c#bxfz@40j2oOji}^(r@PO%Hg5d_uMmJuDSXI8fspLD%rPC2ETl%&gbZw}ktrj#
zqGK_ZiYx=i$%O$vJ^?;HA(#o7;xnXPz%dD@;na0KT+F840zWRm_q^F;($wdq6EfSj
z;iOYuUV<|Xf)P>MEu=^at~GpX=~;E`pjr|ogIk3w#f8N5o!*KV97c{3RZAwE!BKD(
z)&);+(A&r%tP9Lc$yF}o*>Jm&y%CVUXC2e@;X9VqBSJxF8lHsN0R=py)suuB@>IxN
zgEpKVfy_I5f7GpVPtS}Odh|9Omnqbh)*>!mfSQ3C;o#Rr(GwK}mV>V8oEn+{iBBy)
zbN+fgg|6Pm1J(Q4w_$J*ZQP6IpT4fe^W)aCt>H!wN%P@#BWY(f*QD=Ql@VkG&-EE4
zy0Mu3Pax|}YH!@F-GVe5>*Bvq4j|BnveJeM{D4%F9WRP~A|&;H3PzX$^|5>%3GevS
zbs<c{=3CZ8*73D={H@!PqZ{T1y?)PX3)&`Xt%Wv9)UD;6CmcLc4q9&u&cTnURe%NV
J#B+Vd{s5hxo`nDa

literal 0
HcmV?d00001

diff --git a/recipe/meta.yaml b/transformers-4.38.0/meta.yaml
similarity index 81%
rename from recipe/meta.yaml
rename to transformers-4.38.0/meta.yaml
index 80688b6..5896432 100644
--- a/recipe/meta.yaml
+++ b/transformers-4.38.0/meta.yaml
@@ -6,8 +6,11 @@ package:
   version: {{ version }}

 source:
-  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
-  sha256: aa98177980467cb0c73f34b19d70d0577ec021c7c00706fbaca46ac358fd083c
+  url: https://github.com/huggingface/transformers/archive/refs/tags/v4.38.0.tar.gz
+  sha256: ee13db4eb3262bd0d87c348680c211fd68a3a85b3863c56de1920e705a767a4d
+  patches:
+    - 0001-Fix-for-CVE-2024-11392-11393-11394.patch
+    - 0001-Fix-for-CVE-2024-12720.patch

 build:
   noarch: python
@@ -23,7 +26,7 @@ requirements:
     - datasets !=2.5.0  # Required for transformers-cli.
     - filelock
     - huggingface_hub >=0.19.3,<1.0
-    - numpy >=1.17
+    - numpy {{ numpy }}
     - regex !=2019.12.17
     - requests
     - safetensors >=0.4.1
--
2.40.1
